{% extends 'main.html' %}
{% block content %}
{% include 'nav.html' %}

<div id="page-content-wrapper">
    <div id="content">
        <div class="container-fluid p-0 px-lg-0 px-md-0">
            <!-- Topbar -->
            {% include 'topbar.html' %}
            <div class="col-md-12 mt-4">
                <div class="card">
                    <div class="card-body">
                        <!-- title -->
                        <div class="d-md-flex align-items-center">
                            <div>
                                <h4 class="card-title">Tickets</h4>
                                <h5 class="card-subtitle">List of all available Tickets</h5>
                            </div>
                            <div class="ml-auto">
                                <div class="dl">
                                    <a href="{% url 'create_ticket' %}"
                                        class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm">
                                        Add New<i class="fas fa-plus-circle mx-2"></i></a>
                                </div>
                            </div>
                        </div>
                        <!-- title -->
                    </div>
                    <div class="table-responsive">
                        <table class="table v-middle">
                            <thead>
                                <tr class="bg-light">
                                    <th class="border-top-0">ID</th>
                                    <th class="border-top-0">Title</th>
                                    <th class="border-top-0">Description</th>
                                    <th class="border-top-0">Assigned To</th>
                                    <th class="border-top-0">Priority</th>
                                    <th class="border-top-0">Classification</th>
                                    <th class="border-top-0">Logs</th>
                                    <th class="border-top-0">Manage</th>

                                </tr>
                            </thead>
                            <tbody>
                                {% for ticket in tickets %}
                                <tr>
                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.id}}</h4>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.title}}</h4>
                                            </div>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.description}}</h4>
                                            </div>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.assigned}}</h4>
                                            </div>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.priority}}</h4>
                                            </div>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="d-flex align-items-center">

                                            <div class="">
                                                <h4 class="m-b-0 font-16">{{ticket.classification}}</h4>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <a href="{% url 'ticket_logs' ticket.id %}"
                                            class="d-none d-sm-inline-block btn btn-sm btn-secondary shadow-sm ">
                                            <i class="fas fa-clock"></i></a>
                                    </td>
                                    <td>
                                        <a href="{% url 'update_ticket' ticket.id %}"
                                            class="d-none d-sm-inline-block btn btn-sm btn-warning shadow-sm ">
                                            <i class="fas fa-edit ml-1 mr-0"></i></a>
                                        <a href="#" data-toggle="modal" data-target="#ticketDeleteModal{{ticket.id}}"
                                            class="d-none d-sm-inline-block btn btn-sm btn-danger shadow-sm ">
                                            <i class="fas fa-trash-alt"></i></a>
                                    </td>

                                    <div class="modal fade" id="ticketDeleteModal{{ticket.id}}" tabindex="-1"
                                        role="dialog" aria-labelledby="ticketDeleteModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="ticketDeleteModalLabel">Would you like
                                                        to delete {{ticket.title}}?</h5>
                                                    <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>

                                                <div class="modal-footer">
                                                    <button class="btn btn-sm btn-secondary"
                                                        data-dismiss="modal">Close</button>
                                                    <a class="btn btn-sm btn-danger"
                                                        href="{% url 'delete_ticket' ticket.id %}">Delete</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                </tr>

                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>



{% endblock %}